(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,t,n){e.exports=n(39)},20:function(e,t,n){},21:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(13),c=n.n(o),u=(n(20),n(2)),s=(n(21),function(e){var t=e.name,n=e.number,r=e.onClick;return a.a.createElement("div",{className:"contact"},a.a.createElement("em",null,t)," - ",n," ",a.a.createElement("button",{onClick:r},"Delete"))}),l=function(e){var t=e.persons,n=e.filter,r=e.handleDelete;return t.map((function(e){var t=e.name,o=e.number,c=e.id,u=t.toUpperCase(),l=n.toUpperCase();return u.includes(l)?a.a.createElement(s,{name:t,number:o,key:t,onClick:function(){return r(c)}}):a.a.createElement(a.a.Fragment,null)}))},i=function(e){var t=e.filter,n=e.handleChange;return a.a.createElement("form",{className:"contact"},a.a.createElement("div",null,"filter shown with : ",a.a.createElement("input",{value:t,onChange:n})))},m=function(e){var t=e.newName,n=e.handleName,r=e.newNumber,o=e.handleNumber,c=e.handleSubmit;return a.a.createElement("form",{onSubmit:c,className:"contact"},a.a.createElement("div",null,"name: ",a.a.createElement("input",{value:t,onChange:n})),a.a.createElement("div",null,"number: ",a.a.createElement("input",{value:r,onChange:o})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"Add")))},f=n(14),d=n(3),h=n.n(d);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var b="/api/persons/",E=function(){return h.a.get(b).then((function(e){return e.data})).catch((function(e){throw console.log(e),500===e.response.status?new Error("An internal server error has occured"):new Error(e.message)}))},v=function(e){return h.a.post(b,e).then((function(e){return e.data})).catch((function(t){if(307===t.response.status){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return n.id=t.response.data.id,n.status=307,n}throw console.log(t),404===t.response.status?new Error(t.response.data.error):500===t.response.status?new Error("An internal server error has occured"):new Error(t.message)}))},g=function(e,t){return h.a.delete(b+e).then((function(e){return e.data})).catch((function(e){throw console.log(e),404===e.response.status?new Error("Cannot delete ".concat(t,". It appears that contact does not exits")):500===e.response.status?new Error("An internal server error has occured"):new Error(e.message)}))},w=function(e){return h.a.put(b+e.id,e).then((function(e){return e.data})).catch((function(e){throw console.log(e),404===e.response.status?new Error(e.response.data.error):500===e.response.status?new Error("An internal server error has occured"):new Error(e.message)}))},O=function(e){var t=e.message;return null===t||void 0===t?a.a.createElement(a.a.Fragment,null):a.a.createElement("div",{className:"error"},t)},j=function(e){var t=e.message;return null===t||void 0===t?a.a.createElement(a.a.Fragment,null):a.a.createElement("div",{className:"success"},t)},y=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(""),s=Object(u.a)(c,2),f=s[0],d=s[1],h=Object(r.useState)(""),p=Object(u.a)(h,2),b=p[0],y=p[1],N=Object(r.useState)(""),k=Object(u.a)(N,2),S=k[0],C=k[1],P=Object(r.useState)(),D=Object(u.a)(P,2),A=D[0],F=D[1],x=Object(r.useState)(),B=Object(u.a)(x,2),I=B[0],J=B[1],T=function(e){F(e),setTimeout((function(){F(null)}),5e3)},U=function(e){J(e),setTimeout((function(){J(null)}),5e3)};Object(r.useEffect)((function(){E().then((function(e){o(e)})).catch((function(e){return T(e.message)}))}),[]);return a.a.createElement(a.a.Fragment,null,a.a.createElement("title",null,"Phone-Nook"),a.a.createElement("h1",null,"Phone-Book"),a.a.createElement(j,{message:I}),a.a.createElement(O,{message:A}),a.a.createElement(i,{filter:S,handleChange:function(e){return C(e.target.value)}}),a.a.createElement("h1",null,"Add new"),a.a.createElement(m,{handleName:function(e){return d(e.target.value)},handleNumber:function(e){return y(e.target.value)},handleSubmit:function(e){e.preventDefault();var t={name:f,number:b};v(t).then((function(e){e.status&&307===e.status&&e.id?window.confirm("".concat(f," already exists in the phonebook. Do you wish to replace the old number?"))&&(t.id=e.id,w(t).then((function(e){o(n.filter((function(t){return t.id===e.id?e:t}))),U("Successfully updated ".concat(f," with ").concat(b))})).catch((function(e){T(e.message)}))):(o(n.concat(e)),U("Successfully added ".concat(f," to phonebook")))})).catch((function(e){return T(e.message)})).finally((function(){return d(""),void y("")}))},newName:f,newNumber:b}),a.a.createElement("h1",null,"Numbers"),a.a.createElement(l,{persons:n,filter:S,handleDelete:function(e){var t=n.find((function(t){return t.id===e})).name;window.confirm("Are you sure you want to delete ".concat(t))&&g(e,t).then((function(r){o(n.filter((function(t){return t.id!==e}))),U("".concat(t," has been deleted from the phonebook!"))})).catch((function(e){return F(e.message)}))}}))};c.a.render(a.a.createElement(y,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.bda3f3ba.chunk.js.map